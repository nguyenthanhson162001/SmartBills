<!doctype html>
<html lang="en">

<head>
    <title>

    </title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</head>

<body>

    <div class="container p-4 mt-4">
        <div class="p-4" method="post" enctype="multipart/form-data">
            <h1 id='result'></h1>
            <!-- <div class="form-group">
                <label for="name_post">Name</label>
                <input type="text" name="name_post" id="name_post" class="form-control" placeholder=""
                    aria-describedby="helpId">
                <small id="helpId" class="text-muted"></small>
            </div>
            <div class="form-group">
                <label for="image">Image</label>
                <input type="file" name="image" id="image" class="form-control" placeholder="" aria-describedby="image">
                <small id="helpId" class="text-muted"></small>
            </div> -->
            <!-- <img src="http://ec2-54-255-234-108.ap-southeast-1.compute.amazonaws.com:3001/public/images/bills/a6c710387126f33a139e6603415c8937"
                alt="" srcset=""> -->
            <input type="file" name="" id="your-file-input" class="btn btn-secondary">
            <button class=" btn btn-primary " type=" button" onclick="send()">Submit</button>
            </form>
        </div>
        <div>
            <br> <br><br>
        </div>

        <form class="form-group" method="post" action="http://54.254.67.104:3001/api/account/register">
            <label for="">First Name</label>
            <input type="text" name="firstName" id="firstName" class="form-control" placeholder=""
                aria-describedby="helpId">
            <label for="">last Name</label>
            <input type="text" name="lastName" id="lastName" class="form-control" placeholder=""
                aria-describedby="helpId">
            <label for="">Email</label>
            <input type="text" name="email" id="email" class="form-control" placeholder="" aria-describedby="helpId">
            <label for="">Password</label>
            <input type="text" name="password" id="" class="form-control" placeholder="" aria-describedby="helpId">
            <br>
            <input type="submit" class="btn-primary " value="Register">
        </form>
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <!-- <img src="http://localhost:3001/api/post/getimage/7a72b6a5a9f966421be56b4ea795a906" alt=""> -->
        <script>
            // $(document).ready(function () {
            //     $(`button[type='submit']`).on('click', function (e) {
            //         // e.preventDefault();
            //         var name = $(`input[name='name_post']`).val()
            //         var image = $(`input[name='image']`).val()
            //         console.table({ name, image })
            //     })
            // });

            // var tokenID = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTE1Njk5OTUwNjY4MTNkYzg0ZjVjMGIiLCJpYXQiOjE2Mjg4NjExNTV9.pqKiuVabFR3nB3tmXjh53I_IQUbzFiwBts5jHzHv7Yg'
            // fetch('http://smartbill-env.eba-bimkwri6.us-east-2.elasticbeanstalk.com/api/me/infomation',
            //     {
            //         method: "GET",
            //         headers: {
            //             Accept: "application/json",
            //             "Content-Type": "application/json",
            //             "Access-Control-Allow-Origin": '*',
            //             "Access-Control-Allow-Headers": "Origin, X-Requested-With, Content-Type, Accept",
            //             "Access-Control-Allow-Credentials": "true",
            //             "auth-token": tokenID
            //         }
            //         // body: JSON.stringify({
            //         //     firstName: "Nguyen Son",
            //         //     lastName: "Nguyen",
            //         //     email: "nguyenthanhson162001@gmail.com",
            //         //     password: "123456",
            //         // }),
            //     })
            //     .then(function (response) {
            //         return response.json();
            //     })
            //     .then(function (response) {
            //         console.table(response)
            //     });
            async function send() {
                const fileInput = document.querySelector('#your-file-input');
                const formData = new FormData();
                // https://tolbill.herokuapp.com/detect


                formData.append("image", fileInput.files[0], 'image.png');

                var retult = await fetch("http://localhost:3001/api/bill/store", {
                    method: "POST",
                    headers: {
                        Accept: "application/json",
                        "auth_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTc0YjNhMjIyYjg0MjFkMzRiMDZlN2IiLCJpYXQiOjE2MzY5MDQwODksImV4cCI6MTYzNjkxODQ4OX0.I4k-9XVgIrZ9lT1CgY2w1kOA4wqyItguEFFtHZdtW80"

                    },
                    body: formData,
                });
                console.log(result)


                // var token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTc0YjNhMjIyYjg0MjFkMzRiMDZlN2IiLCJpYXQiOjE2MzY3MDExNDYsImV4cCI6MTYzNjcxNTU0Nn0.Fz6fH403M_x3e1etAnBH4IA5Kfc2vdJi5DwAtlkJhGU'
                // console.log(fileInput.files[0])
                // var retulta = await axios('http://localhost:3001/api/bill/store', {
                //     method: 'POST',
                //     data: formData,
                //     headers: { "Content-Type": "multipart/form-data", 'auth-token': token },
                // })

                if (retult) {
                    console.log(retulta)
                    document.getElementById('result').innerHTML = ` Ok  `;
                } else {
                    document.getElementById('result').innerHTML = ` Error  `;
                }
                // .then(response => response.json())
                // .then(data => {
                //     console.log('Success:', data);
                //     document.getElementById('result').innerHTML = ` Ok  `;
                // })
                // .catch((error) => {
                //     console.error('Error:', error);
                //     document.getElementById('result').innerHTML = error;
                // });
            }

        </script>
</body>

</html>